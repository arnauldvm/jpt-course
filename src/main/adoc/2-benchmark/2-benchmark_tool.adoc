// build_options: 
Java Performance Tuning - Benchmarking tools
============================================
Arnauld Van Muysewinkel <avm@pendragon.be>
v0.0, dd-mmm-2015: Draft version
:backend: slidy
//:theme: volnitsky
:data-uri:
:copyright: Creative-Commons-Zero (Arnauld Van Muysewinkel)
:br: pass:[<br>]


Content
-------

* <<_rtri_requirements,Requirements>>
// GUI (heavy client) testing (p38-41)
// Regression testing (p42)
* <<_rtri_market_overview,Market overview>>
// injectors (p37)
// Standard APi testing (p43-44) + Gattling, LoadRunner ...
* <<_rtri_jmeter,JMeter>>
** basics
// Jmeter ... (pp45...83, 89...97)
** threading model
// Threading model (p84-89)
** timers
** parameters
* Mock-Ups
// (p98-99)
* Practical considerations
** Randomization
// ! _random_ parameters
// ! randomize _before_ run
// randomize timers
** duration
// statistical representativeness
** caching!
// p27-28
** https://regex101.com
* analysing/graphing/reporting...

_(link:../0-extra/1-training_plan.html#_presentations[back to course plan])_


&rtri; Requirements
-------------------

An injector is a tool that is able to _reproducibly_ generate a _well-defined_ load.

* Submit (receive) any kind of HTTP request (response)
* Submit other kind of requests (JDBC, RMI, (SOAP), execute Java code for specific cases)
* Represent complex scenario logic 
* Management of high number of virtual users
* _'Parameterizable'_
* Recording of results

Optional:

* real time display
* analysis, reporting


Kinds of testing tools
----------------------

[style="asciidoc",cols="^10,^1,^10,^1,^10",grid="none",frame="none"]
|=====
|GUI testing
|>
|*Protocol level testing*
|>
|Unit testing
|=====

* GUI testing
** fragile
** e.g. FAT client testing
* *Protocol (or API) level testing*
** HTTP, FTP, SOAP, SMTP, JDBC...
** robust, good isolation level -> best for performance testing
** e.g. web based
* Unit testing = Non-regression testing
** closer to micro-benchmarking
** e.g. JUnit


&rtri; Market Overview
----------------------

OpenSource software:

* *JMeter*: extended GUI, many protocols, scenario = XML tree
* Gatling: scenario = Groovy code
* Grinder: distributed testing with many injectors
* ...

Commercial software:

* HP LoadRunner (very complex)
* IBM Rational Performance Tester
* Borland Silk Performer
* ...

Commercial online services (cloud based):

* BlazeMeter
* Blitz
* ...


&rtri; JMeter
-------------

image::jmeter-images/jmeter.jpg[]

* image:jmeter-images/icon-apache.png[] Apache project: https://jmeter.apache.project
* 100% Java
* Many protocols:
** Web - HTTP, HTTPS
** SOAP / REST
** FTP
** Database via JDBC, MongoDB (NoSQL)
** LDAP
** Message-oriented middleware (MOM) via JMS
** Mail - SMTP(S), POP3(S) and IMAP(S)
** Native commands or shell scripts
** TCP
* Many plugins (http://jmeter-plugins.org/)


JMeter - Modes
--------------

* GUI -> development, testing of the script
* command-line -> scripted execution
* distributed (servers (slave) + one controller)


JMeter - Components
-------------------

[horizontal]
image:jmeter-images/beaker.gif[height=28] Test Plan:: the whole
image:jmeter-images/testtubes.png[height=28] Configuration Elements:: management of variable parameters
&nbsp; -> Properties:: global scope (shared by all threads)
&nbsp; -> Variables:: thread scope (visible only inside a thread)
image:jmeter-images/thread.gif[height=28] Thread Groups:: virtual users
image:jmeter-images/timer.gif[height=28] Timers:: introduce variable delays -> control of the throughput
image:jmeter-images/knob.gif[height=28] Logic Controllers:: conditional, loop, switch...
image:jmeter-images/pipet.png[height=28] Samplers:: execution of a request for various protocols{br}
  -> This is the _lowest level of granularity for the measures_
image:jmeter-images/leafnode.gif[height=28] image:jmeter-images/leafnodeflip.gif[height=28] Pre/Post-processors:: additional processing before/after sampler{br}
  -> (for preparation of request / analysis of response)
image:jmeter-images/question.gif[height=28] Assertions:: describe success conditions
image:jmeter-images/meter.png[height=28] Listeners:: collect the metrics


